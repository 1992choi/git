# Git
- Inflearn > 모두의 깃 & 깃허브



<br><br>



## 개념 정리
### Git이란?
- 깃(Git)은 소프트웨어 개발에서 사용되는 분산 버전 관리 시스템이다.
- 즉, 여러 명이 하나의 프로젝트를 개발할 때, 소스코드의 변경 내역을 추적하고 관리하여 버전을 관리할 수 있는 도구이다.

<br>

### Git 저장소 구조
![image](https://github.com/1992choi/git/assets/27760576/69e54cd4-b495-4b69-b3c8-861fc0d5d9fa)
- 작업 공간(Working Directory)
  - 사용자가 실제로 작업하는 공간.
  - PC에서 프로젝트를 진행하는 폴더이다.
- Staging 영역
  - 로컬 저장소에 저장하기 전 저장하는 공간.
  - 여기에서 프로젝트의 버전을 만든다.
- Local Repository
  - 변경 내역들과 함께 파일이 저장되는 공간.
  - 프로젝트의 변경 사항들이 기록된다.
- Remote Repository
  - 온라인상의 원격 저장소.
  - Github가 해당된다.

<br>

### Git 되돌리기
- Git에서는 작업 내용에 대한 커밋을 아예 취소(Reset)하거나 되돌리기(Revert) 할 수 있다.
- Reset
  - 시계를 마치 과거로 돌리는 듯한 행위
  - 특정 커밋으로 돌아가는 행위이다.
  - 특정 커밋 이후의 커밋이력은 모두 없어지게 된다.
  - Reset에는 3가지 옵션이 있다.
    - soft : 커밋 취소. 스테이징 상태로 유지
    - mixed : 커밋 취소 및 스테이징 취소. 내 로컬 변경 상태로 유지.
    - hard : 커밋 취소 및 스테이징 취소 및 로컬 변경 상태 취소.
- Revert
  - 특정 사건을 없었던 일로 만드는 행위
  - 특정 커밋으로 돌아가기 위해 새 커밋을 수행한다.
- 주의사항
  - reset은 커밋을 완전 삭제하면서 과거 커밋으로 돌아가는 것이기 때문에 원격저장소 및 팀원들이 작업하는 타 브랜치와 추후에 충돌을 일으킬 수 있다.
  - 때문에 협업 프로젝트의 경우에는 git revert를 써서 이전 커밋으로 돌아가는 방법이 안전하다.

<br>

### Git 임시저장
- Git에서는 stash 명령어를 사용하여 현재 작업내용을 임시로 저장할 수 있다.
- 다른 브랜치로 checkout을 해야 하는데, 아직 현재 브랜치에서 작업이 끝나지 않았다면 커밋을 하기가 애매하다.
  이런 경우 stash를 이용하면 작업중이던 파일을 임시로 저장해두고, 현재 브랜치의 상태를 마지막 커밋 상태로 초기화 할 수 있다.
  그 후에 다른 브랜치로 이동하고 작업을 끝낸 후에 작업 중이던 브랜치로 복귀한 후, 이전에 작업하던 내용을 복원할 수 있다.

<br>

### 브랜치(Branch)
- 브랜치란?
  - ![image](https://github.com/1992choi/git/assets/27760576/1e4990ae-4116-4d2d-af22-2fd7e7e7b891)
  - 브랜치는 사용자가 독립적으로 작업을 진행할 수 있도록 돕는 작업 흐름이다.
  - 깃에서 브랜치는 여러 작업을 각각 독립된 공간에서 진행할 수 있도록 하는 기능이다.
  - 하나의 브랜치는 독립된 워크스페이스, 인덱스, 로컬 레포지토리, 리모트 레포지토리 공간을 가진다.
  - 이처럼 브랜치를 이용하면 하나의 프로젝트에서 여러 사람이 동시에 본인의 작업을 진행할 수 있다.
- 브랜치를 이용한 작업 흐름
  - 각 개발자는 메인 브랜치에서 각자 자신이 작업할 새로운 브랜치를 만든다.
  - 각 개발자는 본인이 만든 브랜치 위에서 작업한다.
  - 작업 완료 후 리모트 레포지토리의 자신이 작업한 브랜치를 푸시한다.
  - 리모트 레포지토리에서 메인 브랜치로 풀 리퀘스트(PR, Pull Request)를 진행한다.
  - 협업하는 다른 개발자에게 리뷰를 받는다.
  - 리뷰 및 합의 후 메인 브랜치에 머지한다. 

<br>

### 병합(Merge)
- 병합(Merge)이란?
  - 병합(Merge)은 Git에서 두 개의 branch를 하나로 통합하는 과정이다.
  - 병합에는 Fast-Forward Merge 방식과 3-way Merge 방식이 있다.
- Fast-Forward 방식
  - ![image](https://github.com/1992choi/git/assets/27760576/d1491b31-3844-4790-8329-927fcb40ff9c)
  - 서로 다른 브랜치의 base 커밋에 내용이 변경되지 않았을 때 사용된다.   
    Ex) 기존 Main 브랜치에서 새로운 브랜치인 Feature를 생성 한 후, Main에서는 더 이상의 커밋이 없고 Feature에서만 커밋이 발생한 경우.
  - Merge에 의해서 새로운 커밋이 만들어지지않고, HEAD의 위치만 이동된다.
- 3-way 방식
  - ![image](https://github.com/1992choi/git/assets/27760576/a38d7358-d7eb-40cc-86d5-dab572659966)
  - 각 브랜치에서 새 커밋이 발생했을 때 사용된다.
  - 두 브랜치의 코드를 합쳐서 새로운 커밋을 자동 생성해준다.

<br>

### 재배치(Rebase)
- 재배치(Rebase)란?
  - base를 재설정한다는 의미이다.
  - 하나의 브랜치가 다른 브랜치에서 파생되서 나온 경우, 다른 브랜치에서 진행된 커밋을 다시 가져와서 base를 재설정하는 것을 의미힌다.
- 장점
  - Rebase를 하면 파생된 브랜치의 커밋이력이 기준 브랜치와 같아지므로 작업순서대로 커밋 이력이 남게된다. 때문에 커밋 히스토리가 시간 순서대로 반영되어 이력관리가 용이해진다.
  - 나아가 merge를 통해 발생하는 불필요한 병합 커밋을 제거할 수 있다.
- Merge와의 차이점
  - Merge
    - ![image](https://github.com/1992choi/git/assets/27760576/e403b5b7-2bfc-439c-94aa-0251354580e8)

  - Rebase
    - ![image](https://github.com/1992choi/git/assets/27760576/d28b1253-fef5-442f-baae-f4072ffc43d9)

<br>
 
### 원격 저장소와의 상호작용
- 원격저장소(Github)와의 4가지 상호작용 방법은 아래와 같다.
  - 클론(clone)
    - 원격 저장소 복제하기
  - 푸시(push)
    - 원격 저장소 밀어넣기
  - 패치(fetch)
    - 원격 저장소를 일단 가져만 오기
  - 풀(pull)
    - 원격 저장소를 가져와서 합치기




